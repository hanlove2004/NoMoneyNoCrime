<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="kr.co.moojun.model.DAO.MemberDAO">

	<!-- 회원가입 -->
	<insert id="insetMember" parameterType="kr.co.moojun.model.DTO.MemberDTO">
		INSERT INTO MEMBER 
	    (
	      ID                
	    , NUM             
	    , NAME           
	    , PWD            
	    , BIRTH          
	    , SEX             
	    , PHONE         
	    , EMAIL          
	    , PANALTY      
	    , JOINDATE     
	    , ENABLED      
	    )
	    VALUES
	    (
	      #{id}
	    , member_seq.NEXTVAL
	    , #{name}
	    , #{pwd}
	    , #{birth}
	    , #{sex}
	    , #{phone}
	    , #{email}
	    , '0'
	    , sysdate
	    , '1'
	    )
	</insert>
	
	<!-- 탈퇴 -->
	<delete id="deleteMember" parameterType="kr.co.moojun.model.DTO.MemberDTO">
		DELETE FROM MEMBER  <!-- 회원테이블 -->
		 WHERE ID  = #{id}  <!-- 아이디(PK)  ID(PK)  VARCHAR2(100) NOT NULL -->
		   AND PWD = #{pwd} <!-- 패스워드    PWD       VARCHAR2(200) NOT NULL -->
	</delete>
	
	<!-- 회원 정보 수정 -->
	<update id="updateMember" parameterType="kr.co.moojun.model.DTO.MemberDTO">
		UPDATE MEMBER <!-- 회원테이블 -->
		   SET PWD   = #{pwd} 	<!-- 패스워드    PWD       VARCHAR2(200) NOT NULL -->
		     , PHONE = #{phone} <!-- 전화번호    PHONE     VARCHAR2(100) NOT NULL -->
		     , EMAIL = #{email} <!-- 이메일      EMAIL     VARCHAR2(200) NOT NULL -->
		 WHERE ID  = #{id}  <!-- 아이디(PK)  ID(PK)    VARCHAR2(100) NOT NULL -->
		   AND PWD = #{pwd} <!-- 패스워드    PWD       VARCHAR2(200) NOT NULL -->
	</update>
	
	<!-- 로그인 -->
	<select id="loginMember" resultType="Integer">
		SELECT 
		           COUNT(*) <!-- 회원여부 -->
		  FROM MEMBER <!-- 회원테이블 -->
		 WHERE ID  = #{id} 	<!-- 아이디(PK)  ID(PK)    VARCHAR2(100) NOT NULL -->
		   AND PWD = #{pwd} <!-- 패스워드    PWD       VARCHAR2(200) NOT NULL -->
	</select>
	
	<!-- 회원리스트 조회 -->
	<select id="getMemberList" parameterType="kr.co.moojun.model.DTO.MemberDTO">
		SELECT 
		       * 
		  FROM MEMBER <!-- 회원테이블 -->
		 ORDER BY num DESC
	</select>
	
	<!-- 회원정보 보기 (디테일) -->
	<select id="getMemberDetail" resultType="kr.co.moojun.model.DTO.MemberDTO">
		SELECT 
		       * 
		  FROM MEMBER <!-- 회원테이블 --> 
		 WHERE ID = #{id} <!-- 아이디(PK)  ID(PK)    VARCHAR2(100) NOT NULL -->
	</select>
	
</mapper>