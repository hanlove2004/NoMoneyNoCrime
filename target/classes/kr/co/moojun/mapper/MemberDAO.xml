<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="kr.co.moojun.model.DAO.MemberDAO">
   <!-- 
   MEMBER(회원)
   아이디(PK)  ID(PK)    VARCHAR2(100) NOT NULL
   번호        NUM       NUMBER        NOT NULL
   이름        NAME      VARCHAR2(100) NOT NULL
   패스워드    PWD       VARCHAR2(200) NOT NULL
   생년월일    BIRTH     VARCHAR2(200) NOT NULL
   성별        SEX       VARCHAR2(100) NOT NULL
   전화번호    PHONE     VARCHAR2(100) NOT NULL
   이메일      EMAIL     VARCHAR2(200) NOT NULL
   벌점        PANALTY   VARCHAR2(100) NOT NULL
   가입날짜    JOINDATE  DATE          NOT NULL
   사용여부    ENABLED   VARCHAR2(50)  NOT NULL
   -->
   <!-- 회원가입 -->
   <insert id="insetMember" parameterType="kr.co.moojun.model.DTO.MemberDTO">
      INSERT INTO MEMBER 
       (
         ID                
       , NUM             
       , NAME           
       , PWD            
       , BIRTH          
       , SEX             
       , PHONE         
       , EMAIL          
       , PANALTY      
       , JOINDATE     
       , ENABLED      
       )
       VALUES
       (
         #{id}
       , member_seq.NEXTVAL
       , #{name}
       , #{pwd}
       , #{birth}
       , #{sex}
       , #{phone}
       , #{email}
       , '0'
       , sysdate
       , '1'
       )
   </insert>
   
   <!-- 탈퇴 -->
   <delete id="deleteMember" parameterType="kr.co.moojun.model.DTO.MemberDTO">
      DELETE FROM MEMBER  
       WHERE ID  = #{id}  
         AND PWD = #{pwd} 
   </delete>
   
   <!-- 회원 정보 수정 -->
   <update id="updateMember" parameterType="kr.co.moojun.model.DTO.MemberDTO">
      UPDATE MEMBER <!-- 회원테이블 -->
         SET PWD   = #{pwd}    
           , PHONE = #{phone}
           , EMAIL = #{email} 
       WHERE ID  = #{id}  
         AND PWD = #{pwd} 
   </update>
   
   <!-- 로그인 -->
   <select id="loginMember" resultType="Integer">
      SELECT 
             COUNT(*) 
        FROM MEMBER 
       WHERE ID  = #{id}    
         AND PWD = #{pwd} 
   </select>
   
   <!-- 회원리스트 조회 -->
   <select id="getMemberList" parameterType="kr.co.moojun.model.DTO.MemberDTO">
      SELECT 
             * 
        FROM MEMBER 
       ORDER BY num DESC
   </select>
   
   <!-- 회원정보 보기 (디테일) -->
   <select id="getMemberDetail" resultType="kr.co.moojun.model.DTO.MemberDTO">
      SELECT 
             * 
        FROM MEMBER 
       WHERE ID = #{id} 
   </select>
   
</mapper>