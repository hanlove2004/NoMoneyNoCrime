<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="kr.co.moojun.model.DAO.WorkboardDAO">

	<!-- 일자리 게시판 쓰기 -->
	<insert id="insertWorkBoard" parameterType="kr.co.moojun.model.WorkboardDTO">
		INSERT INTO
		WORKBOARD (num, id, title, compensate, needpeople, content, regdate, state, regpeople, addr, expiredate, expire)
		VALUES (work_seq.NEXTVAL, #{id}, #{title}, #{compensate}, #{needpeople}, #{content}, sysdate, '0', #{addr}, #{expiredate}, '1')
	</insert>
	
	<!-- 일자리게시판 리스트(여러개) -->
	<select id="getWorkBoardList" parameterType="hashmap" resultType="kr.co.moojun.model.WorkboardDTO">
		SELECT * FROM
		(SELECT A.*, ROWNUM r FROM
			(SELECT * FROM WORKBOARD ORDER BY PARENT DESC, SORT) A
		)
		WHERE r >= #{start} and r &lt;= #{end}
	</select>
	
	<!-- 일자리게시판 디테일(상세보기) -->
	<select id="getWorkBoard" parameterType="Integer">
		SELECT * FROM WORKBOARD WHERE NUM = #{num}
	</select>
	
	<!-- 일자리게시판 수정하기 -->
	<update id="updateWorkBoard" parameterType="kr.co.moojun.model.WorkboardDTO">
		UPDATE WORKBOARD 
		SET title = #{title}, compensate = #{compensate}, needpeople = #{needpeople}, 
				content = #{content}, addr = #{addr}, expiredate = #{expiredate}
		WHERE num = #{num} 	
	</update>
	
	<!-- 일자리게시판 삭제하기(실제 삭제가 아니라 유효기간만료된 글을 리스트에서 안보이게 하는 것) -->
	<update id="deleteWorkBoard" parameterType="kr.co.moojun.model.WorkboardDTO">
		UPDATE WORKBOARD SET expire = '0' WHERE num = #{num} 
	</update>
	
	<!-- 일자리게시판 게시글의 수 -->
	<select id="getWorkBoardCount">
		SELECT COUNT(*) FROM WORKBOARD
	</select>

</mapper>